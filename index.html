<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Orden de Pedido ‚Äì Datos del Cliente + Relevamiento</title>
  <style>
    :root{ --accent:#111; --ink:#222; --muted:#666; --stroke:#ddd; --bg:#fff; --armado-prev-h: 240px; }
    *{box-sizing:border-box;}
    html,body{ height:100%; }
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink); background:var(--bg); -webkit-text-size-adjust:100%;
    }
    .wrap{ width:1100px; margin:24px auto; padding:0 16px; }

    /* ===== Encabezado ===== */
    .header{
      position:relative; display:grid; grid-template-columns:auto 1fr auto;
      align-items:center; min-height:84px; padding:6px 0;
    }
    .logo{ grid-column:1; justify-self:start; }
    .logo img{ height:56px; width:auto; display:block; }
    .op-center{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      display:flex; align-items:center; gap:8px;
    }
    .op-center label{font-weight:700; letter-spacing:.5px;}
    .op-input{ width:320px; border:2px solid #000; padding:10px 12px; font-size:24px; font-weight:700; }
    .side-col{ grid-column:3; display:flex; flex-direction:column; gap:10px; align-items:flex-end; }
    .head-field{ display:flex; align-items:center; gap:8px; font-weight:600; }
    .head-field input{ border:1px solid var(--stroke); padding:8px 10px; border-radius:6px; font-size:14px; }

    /* ===== Secciones ===== */
    .section{ margin-top:24px; border:1px solid #000; }
    .section-title{
      background:#111; color:#fff; text-align:center; padding:12px 10px;
      font-weight:800; letter-spacing:.6px;
    }
    .grid{ display:grid; gap:14px 18px; grid-template-columns: repeat(2, minmax(260px,1fr)); padding:18px; }
    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{ font-size:14px; font-weight:700; }
    .field input, .field select, .field textarea{
      border:1px solid var(--stroke); padding:10px 12px; border-radius:8px; font-size:16px; width:100%;
    }
    .hint{ font-size:12px; color:var(--muted); }
    .row-2{ display:grid; grid-template-columns: 1fr 1fr; gap:18px; }
    .subbar{
      font-weight:800; background:#f6f6f6; border:1px solid var(--stroke);
      padding:8px 10px; margin-bottom:6px; border-radius:6px;
    }
    .line-2{ display:grid; grid-template-columns: 1fr 1fr; gap:18px; }
    .pill{
      display:inline-block; background:#111; color:#fff; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:800; letter-spacing:.4px;
    }
    .btn{ border:1px solid #000; background:#fff; padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:600; text-decoration:none; color:#000; }

    /* ====== Tarjetas de c√°mara ====== */
    .cam-grid{ display:grid; grid-template-columns: 1fr; gap:18px; padding:18px; justify-items:center; }
    .cam-card{ background:#fff; border:1px solid #bbb; border-radius:10px; padding:16px; width:100%; max-width:720px; margin:0 auto; }
    .cam-head{ font-weight:800; margin-bottom:10px; }
    .cam-actions{ display:flex; gap:10px; flex-wrap:wrap; }
    .btn.primary{ background:#1a73e8; color:#fff; border-color:#1a73e8; }
    .btn.secondary{ background:#fff; color:#111; border-color:#111; }
    .preview{ margin-top:12px; text-align:center; background:#f7f7f7; padding:10px; border-radius:8px; border:1px solid #e5e5e5; }
    .preview img{ max-width:100%; height:auto; display:none; border-radius:8px; border:1px solid #ccc; }
    .hint.small{ font-size:12px; color:#666; margin-top:6px; display:block; }

    /* Dropdown simple */
    .dropdown{ position:relative; }
    .dd-toggle{ position:relative; }
    .dd-menu{
      position:absolute; top:100%; left:0; min-width:180px; margin-top:6px; padding:6px;
      background:#fff; border:1px solid #ccc; border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,.12);
      list-style:none; display:none; z-index:10;
    }
    .dd-menu.open{ display:block; }
    .dd-menu li{ margin:2px 0; }
    .dd-item{ width:100%; text-align:left; background:#fff; color:#111; border:1px solid #ddd; border-radius:6px; padding:8px 10px; cursor:pointer; }
    .dd-item:hover{ background:#f3f6ff; border-color:#c9d7ff; }

    /* ===== ARMADO ===== */
    .armado-frame{ border:1px solid #cfcfcf; border-radius:10px; padding:14px; background:#fff; }
    .armado-frame .field{ border:1px solid #e1e1e1; border-radius:8px; padding:10px; background:#fff; }
    .armado-frame .subbar{ margin:-6px -6px 8px -6px; padding:8px 10px; background:#f6f6f6; border-bottom:1px solid #ececec; border-top-left-radius:6px; border-top-right-radius:6px; }
    .armado-2col{ grid-template-columns: repeat(2, minmax(260px,1fr)); gap:14px; }
    .armado-details{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; margin-top:12px; }
    .armado-details .stack-left{ display:grid; gap:12px; }
    .armado-preview{ margin-top:8px; padding:10px; border:1px solid #e1e1e1; border-radius:8px; background:#fafafa; text-align:center; }
    .armado-preview img{ display:none; width:100%; height:var(--armado-prev-h); object-fit:contain; object-position:center; border:1px solid #ddd; border-radius:8px; background:#fff; }
    #observacionesArmado{ width:100%; min-height:220px; resize:vertical; border:1px solid #e1e1e1; border-radius:8px; padding:10px 12px; font-size:15px; }

    @media (max-width:900px){
      .armado-2col{ grid-template-columns:1fr; }
      .armado-details{ grid-template-columns:1fr; }
    }
    :root{ --diseno-prev-h: 220px; } /* alto fijo de preview (ajust√° a gusto) */

  .diseno-frame{
    border:1px solid #cfcfcf;
    border-radius:10px;
    padding:14px;
    background:#fff;
  }
  .diseno-2col{
    grid-template-columns: repeat(2, minmax(260px,1fr));
  }
  .design-preview{
    margin-top:8px; padding:10px; border:1px solid #e1e1e1; border-radius:8px;
    background:#fafafa; text-align:center;
  }
  .design-preview img{
    display:none; width:100%; height:var(--diseno-prev-h);
    object-fit:contain; object-position:center;
    border:1px solid #ddd; border-radius:8px; background:#fff;
  }
  @media (max-width:900px){
    .diseno-2col{ grid-template-columns:1fr; }
  }
  :root{ --diseno-prev-h: 220px; }

.diseno-frame{
  border:1px solid #cfcfcf; border-radius:10px; padding:14px; background:#fff;
}
.diseno-2col{ grid-template-columns: repeat(2, minmax(260px,1fr)); }
.design-preview{
  margin-top:8px; padding:10px; border:1px solid #e1e1e1; border-radius:8px;
  background:#fafafa; text-align:center;
}
.design-preview img{
  display:none; width:100%; height:var(--diseno-prev-h);
  object-fit:contain; object-position:center;
  border:1px solid #ddd; border-radius:8px; background:#fff;
}

/* La fila de color ocupa el ancho completo */
.fullrow{ grid-column:1 / -1; }
.color-row{ display:grid; grid-template-columns: 320px 1fr; gap:12px; align-items:center; }

@media (max-width:900px){
  .diseno-2col{ grid-template-columns:1fr; }
  .color-row{ grid-template-columns:1fr; }
}
/* ===== NOTAS ===== */
.notes-frame{
  padding:16px 18px 18px;
  background:#fff;
}

.notes-lines{
  position:relative;
  height: 160px;                       /* alto visible (5 l√≠neas) */
  border:1px solid #e1e1e1;
  border-radius:8px;
  /* 5 l√≠neas tipo cuaderno: cada 28px */
  background:
    repeating-linear-gradient(
      to bottom,
      #dcdcdc 0 1px,
      transparent 1px 28px
    );
}
.notes-lines textarea{
  position:absolute; inset:0;
  width:100%; height:100%;
  padding:10px 12px;
  border:0; outline:none;
  background:transparent;
  font-size:15px;
  line-height:28px;                    /* coincide con el espaciamiento de l√≠neas */
  resize:vertical;
}

/* Pie: firma izquierda / aclaraci√≥n + DNI derecha */
.notes-footer{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:18px;
  margin-top:16px;
}

/* Firma */
.notes-sign-box{
  display:flex; flex-direction:column; align-items:flex-start;
  padding-top:22px;
}
.sign-line{
  width: 62%;
  min-width: 260px;
  border-bottom:1px solid #9a9a9a;
  height: 32px;                        /* espacio visual antes de la l√≠nea */
}
.sign-caption{
  margin-top:6px;
  font-size:14px; color:#555;
}

/* Aclaraci√≥n + DNI */
.notes-id-box{
  display:grid; gap:12px; align-content:start;
}
.underline-label{
  display:block; font-size:14px; color:#333; margin-bottom:2px;
}
.underline-input{
  display:block; width:100%;
  border:0; border-bottom:1px solid #9a9a9a;
  padding:8px 2px 6px;
  font-size:15px; background:#fff; outline:none;
}

/* Responsive */
@media (max-width:900px){
  .notes-footer{ grid-template-columns:1fr; }
  .sign-line{ width:100%; min-width:0; }
}
/* Toolbar flotante arriba */
.toolbar{
  display:flex; justify-content:flex-end; gap:10px;
  position:sticky; top:0; z-index:50;
  padding:8px 0; background:#fff;
}

/* ===== Reglas de impresi√≥n ===== */
@media print{
  @page{
    size: A4 portrait;           /* A4 vertical */
    margin: 12mm;                /* m√°rgenes del PDF */
  }
  .no-print, .dd-menu{ display:none !important; }  /* oculta botones/men√∫s */
  .wrap{ width:auto; margin:0; padding:0; }
  .section{ break-inside: avoid-page; page-break-inside: avoid; }
  input, select, textarea{
    border:0 !important; background:transparent !important;
    -webkit-appearance: none; appearance: none;
  }
  /* Evita bordes demasiado fuertes en impresi√≥n */
  .armado-frame, .field, .notes-lines{ border-color:#cfcfcf !important; }
}

  </style>
</head>
<body>
  <div class="wrap">
    <!-- ===== Toolbar: Guardar como PDF ===== -->
<div class="toolbar no-print">
  <button id="btnPdf" class="btn primary">üíæ Guardar como PDF</button>
</div>

    <!-- ===== Encabezado ===== -->
    <header class="header" aria-label="Encabezado de orden">
      <div class="logo"><img src="img/superlock.png" alt="Superlock Puertas Blindadas"></div>
      <div class="op-center">
        <label for="op">OP-</label>
        <input id="op" class="op-input" type="text" placeholder="Escribir n√∫mero o c√≥digo de OP‚Ä¶" />
      </div>
      <div class="side-col">
        <div class="head-field">
          <label for="fecha">FECHA:</label>
          <input id="fecha" name="fecha" type="date" />
        </div>
        <div class="head-field">
          <label for="asesor">ASESOR:</label>
          <input id="asesor" name="asesor" type="text" placeholder="Nombre del asesor" />
        </div>
      </div>
    </header>

    <!-- ===== Secci√≥n 1: DATOS DEL CLIENTE ===== -->
    <section class="section" aria-labelledby="titulo-datos">
      <div id="titulo-datos" class="section-title">DATOS DEL CLIENTE</div>
      <div class="grid">
        <div class="field">
          <label for="nombre">NOMBRE Y APELLIDO</label>
          <input id="nombre" type="text" autocomplete="name" placeholder="Ej.: Geremias Gomez" />
        </div>
        <div class="field">
          <label for="telefono">TEL√âFONO</label>
          <input id="telefono" type="tel" inputmode="numeric" pattern="[0-9]{7,15}" placeholder="S√≥lo n√∫meros, sin espacios" title="Ingrese entre 7 y 15 d√≠gitos sin espacios." />
          <span class="hint">Se aceptan √∫nicamente n√∫meros seguidos (se eliminar√°n espacios, +, guiones, etc.).</span>
        </div>
        <div class="field">
          <label for="email">EMAIL</label>
          <input id="email" type="email" autocomplete="email" placeholder="nombre@correo.com" />
        </div>
        <div class="field">
          <label for="celular">CELULAR</label>
          <input id="celular" type="tel" inputmode="numeric" pattern="[0-9]{7,15}" placeholder="S√≥lo n√∫meros, sin espacios" title="Ingrese entre 7 y 15 d√≠gitos sin espacios." />
        </div>
        <div class="field">
          <label for="direccion">DIRECCI√ìN</label>
          <input id="direccion" type="text" autocomplete="street-address" placeholder="Calle, n√∫mero, piso, etc." />
        </div>
        <div class="field">
          <label for="localidad">LOCALIDAD (Direcci√≥n de mapa)</label>
          <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
            <input id="localidad" type="text" placeholder="Ciudad / localidad" />
          </div>
        </div>
        <div class="field">
          <label for="razon">RAZ√ìN SOCIAL</label>
          <input id="razon" type="text" placeholder="(opcional)" />
        </div>
        <div class="field">
          <label for="cuit">CUIT/DNI</label>
          <input id="cuit" type="text" inputmode="numeric" placeholder="S√≥lo n√∫meros" />
        </div>
      </div>
    </section>

    <!-- ===== Secci√≥n 2: RELEVAMIENTO GENERAL ===== -->
    <section class="section" aria-labelledby="titulo-relev">
      <div id="titulo-relev" class="section-title">RELEVAMIENTO GENERAL</div>
      <div class="grid" style="padding-bottom:6px;">
        <div class="row-2" style="grid-column:1 / -1;">
          <div class="field">
            <div class="subbar">marco actual (estado, firmeza)</div>
            <select id="marcoEstado">
              <option value="" selected disabled>Elegir (1 a 5)</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
            </select>
          </div>
          <div class="field">
            <div class="subbar">piso actual (material, nivel)</div>
            <input id="pisoActual" type="text" placeholder="Ej.: porcelanato nivelado, cemento alisado, etc." />
          </div>
        </div>
      </div>

      <div class="grid" style="padding-top:6px;">
        <div class="field">
          <div class="subbar">modelo puerta</div>
          <select id="modeloPuerta">
            <option value="" selected disabled>Seleccionar</option>
            <option>puerta entry [1.2mm]</option>
            <option>puerta bunker [1.6mm]</option>
            <option>puerta bunker + [2.1mm]</option>
          </select>
        </div>

        <div class="field">
          <div class="subbar">sist. de instalaci√≥n</div>
          <select id="sistInstal">
            <option value="" selected disabled>Seleccionar</option>
            <option>acople marco madera</option>
            <option>acople marco met√°lico</option>
          </select>
        </div>

        <div class="field">
          <div class="subbar">marco nuevo</div>
          <select id="marcoNuevo">
            <option value="" selected disabled>Seleccionar</option>
            <option>Funda</option>
            <option>marco con perfil inferior</option>
            <option>marco sin perfil inferior</option>
          </select>
        </div>

        <div class="field">
          <div class="subbar">ancho de marco</div>
          <select id="anchoMarco">
            <option value="" selected disabled>Seleccionar</option>
            <option>Funda</option>
            <option>10 cm</option>
            <option>12 cm</option>
            <option>15 cm</option>
          </select>
        </div>

        <div class="field" style="grid-column:1 / -1; margin-top:8px;">
          <div class="line-2">
            <div class="field">
              <div class="subbar">OTROS</div>
              <input id="otros" type="text" placeholder="Observaciones / notas" />
            </div>
            <div class="field">
              <div class="subbar">diag. ascensor</div>
              <div style="display:flex; gap:8px; align-items:center;">
                <input id="diagAsc" type="number" inputmode="numeric" min="0" step="1" placeholder="0" style="max-width:240px;" />
                <span class="pill">mm</span>
              </div>
              <span class="hint">Ingrese la diagonal del ascensor en mil√≠metros.</span>
            </div>
          </div>
        </div>

        <div class="field" style="grid-column:1 / -1;">
          <div class="line-2">
            <div class="field">
              <div class="subbar">herrajes</div>
              <select id="herrajes">
                <option value="" selected disabled>Seleccionar</option>
                <option>est√°ndar (nuevo)</option>
                <option>especial (provisto por cliente)</option>
                <option>sin herrajes</option>
                <option>exterior, del cliente</option>
                <option>interior, del cliente</option>
              </select>
            </div>
            <div class="field">
              <div class="subbar">forma de entrega</div>
              <select id="formaEntrega">
                <option value="" selected disabled>Seleccionar</option>
                <option>acople + instalaci√≥n</option>
                <option>marco + instalaci√≥n</option>
                <option>marco (preajustada)</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== RELEVAMIENTO ¬∑ TOMA DE MEDIDAS (FOTO) ===== -->
    <section class="section" aria-labelledby="titulo-foto-medidas">
      <div id="titulo-foto-medidas" class="section-title">RELEVAMIENTO ¬∑ TOMA DE MEDIDAS</div>
      <div class="cam-grid">
        <div class="cam-card" data-cam="medidas">
          <div class="cam-head">Foto de referencia (toma de medidas)</div>
          <div class="cam-actions">
            <button type="button" class="btn primary cam-open">üì∑ Abrir c√°mara</button>
            <button type="button" class="btn secondary cam-retake" disabled>Retomar</button>
            <button type="button" class="btn secondary cam-clear" disabled>Eliminar</button>
            <div class="dropdown">
              <button type="button" class="btn secondary dd-toggle" aria-expanded="false">Opciones ‚ñæ</button>
              <ul class="dd-menu" role="menu" aria-label="Opciones de toma de medidas">
                <li><button type="button" class="dd-item" data-value="Puerta">Puerta</button></li>
                <li><button type="button" class="dd-item" data-value="Marco">Marco</button></li>
                <li><button type="button" class="dd-item" data-value="puerta+pa√±o">puerta+pa√±o</button></li>
              </ul>
              <input type="hidden" name="medidas_opcion" class="dd-value">
            </div>
          </div>
          <input type="file" class="cam-input" accept="image/*" capture="environment" hidden>
          <div class="preview">
            <img class="cam-preview" alt="Vista previa ‚Äî Toma de medidas">
            <span class="hint small">Us√° esta foto para reemplazar los dibujos de ‚ÄúToma de medidas‚Äù.</span>
          </div>
          <input type="hidden" name="foto_medidas_base64" class="cam-base64">
        </div>
      </div>
    </section>

    <!-- ===== RELEVAMIENTO ¬∑ CORTE DE MARCO (VISTA SUPERIOR) (FOTO) ===== -->
    <section class="section" aria-labelledby="titulo-foto-corte">
      <div id="titulo-foto-corte" class="section-title">RELEVAMIENTO ¬∑ CORTE DE MARCO (VISTA SUPERIOR)</div>
      <div class="cam-grid">
        <div class="cam-card" data-cam="corte">
          <div class="cam-head">Foto de referencia (corte de marco ‚Äî vista superior)</div>
          <div class="cam-actions">
            <button type="button" class="btn primary cam-open">üì∑ Abrir c√°mara</button>
            <button type="button" class="btn secondary cam-retake" disabled>Retomar</button>
            <button type="button" class="btn secondary cam-clear" disabled>Eliminar</button>
            <div class="dropdown">
              <button type="button" class="btn secondary dd-toggle" aria-expanded="false">Opciones ‚ñæ</button>
              <ul class="dd-menu" role="menu" aria-label="Opciones de corte">
                <li><button type="button" class="dd-item" data-value="Marco 1">Marco 1</button></li>
                <li><button type="button" class="dd-item" data-value="Marco 2">Marco 2</button></li>
                <li><button type="button" class="dd-item" data-value="Marco 3">Marco 3</button></li>
              </ul>
              <input type="hidden" name="corte_opcion" class="dd-value">
            </div>
          </div>

          <input type="file" class="cam-input" accept="image/*" capture="environment" hidden>
          <div class="preview">
            <img class="cam-preview" alt="Vista previa ‚Äî Corte de marco">
            <span class="hint small">Us√° esta foto para reemplazar las im√°genes del corte de marco.</span>
          </div>
          <input type="hidden" name="foto_corte_base64" class="cam-base64">
        </div>
      </div>
    </section>

    <!-- ===== Secci√≥n: ARMADO ===== -->
    <section class="section" aria-labelledby="titulo-armado">
      <div id="titulo-armado" class="section-title">ARMADO</div>

      <div class="armado-frame">
        <!-- fila superior -->
        <div class="grid armado-2col">
          <div class="field">
            <div class="subbar">sistema de seguridad</div>
            <select id="seguridadModelo">
              <option value="" selected disabled>Seleccionar</option>
              <option value="202">202</option>
              <option value="205">205</option>
              <option value="5002">5002</option>
              <option value="5005">5005</option>
            </select>
            <div class="armado-preview">
              <img id="imgSeguridad" alt="Imagen de sistema de seguridad">
              <small class="hint">Eleg√≠ un modelo para ver la imagen de referencia.</small>
            </div>
          </div>

          <div class="field">
            <div class="subbar">mano de apertura</div>
            <select id="manoApertura">
              <option value="" selected disabled>Seleccionar</option>
              <option value="int-izq">apertura interior izquierda</option>
              <option value="ext-izq">apertura exterior izquierda</option>
              <option value="int-der">apertura interior derecha</option>
              <option value="ext-der">apertura exterior derecha</option>
            </select>
            <div class="armado-preview">
              <img id="imgApertura" alt="Imagen de mano de apertura">
              <small class="hint">Eleg√≠ una mano de apertura para ver la imagen.</small>
            </div>
          </div>
        </div>

        <!-- fila inferior -->
        <div class="armado-details">
          <div class="stack-left">
            <div class="field">
              <div class="subbar">sistema smart</div>
              <input id="smartMarcaModelo" type="text" placeholder="marca / modelo (escribir textual)">
            </div>

            <div class="field">
              <div class="subbar">herrajes de seguridad</div>
              <select id="herrajesSeg">
                <option value="" selected disabled>Seleccionar</option>
                <option value="solo protector">solo protector</option>
                <option value="panel + protector">panel + protector</option>
              </select>
            </div>

            <div class="field">
              <div class="subbar">visor angular</div>
              <select id="visorAngular">
                <option value="" selected disabled>Seleccionar</option>
                <option value="visor √≥ptico">visor √≥ptico</option>
                <option value="sin visor">sin visor</option>
              </select>
            </div>
          </div>

          <div class="field">
            <div class="subbar">observaciones</div>
            <textarea id="observacionesArmado" rows="10" placeholder="Escribir textual‚Ä¶"></textarea>
          </div>
        </div>
      </div>
    </section>
<!-- ===== DISE√ëO ===== -->
<!-- ===== DISE√ëO ===== -->
<section class="section" aria-labelledby="titulo-diseno">
  <div id="titulo-diseno" class="section-title">DISE√ëO</div>

  <div class="diseno-frame">
    <div class="grid diseno-2col">
      <!-- Revestimiento interior -->
      <div class="field">
        <div class="subbar">revestimiento interior</div>

        <label for="matInterior">material</label>
        <select id="matInterior">
          <option value="" selected disabled>Seleccionar</option>
          <option>Chapa</option>
          <option>MDF</option>
          <option>MDF + Enchapado</option>
        </select>

        <label for="disInterior" style="margin-top:8px;">dise√±o</label>
        <select id="disInterior">
          <option value="" selected disabled>Seleccionar dise√±o</option>
          <option>SL-1R</option><option>SL-2R</option><option>SL-1RM</option><option>SL-2RM</option>
          <option>SL-3R</option><option>SL-3RB</option><option>SL-3RM</option><option>SL-3RBM</option>
          <option>SL-1LD</option><option>SL-2LA</option><option>SL-1LA</option><option>SL-1LB</option><option>SL-1LC</option>
          <option>SL-3L</option><option>SL-4L</option><option>SL-2LB</option>
          <option>SL-4R</option><option>SL-4RB</option><option>SL-4RM</option><option>SL-4RBM</option>
          <option>SL-7L</option><option>SL-00</option><option>LISA</option>
        </select>

        <label for="termInterior" style="margin-top:10px;">terminaci√≥n interior</label>
        <input id="termInterior" type="text" placeholder="Ej.: sw-5896">

        <div class="design-preview">
          <img id="imgInterior" alt="Dise√±o interior seleccionado">
          <small class="hint">Eleg√≠ material y dise√±o para ver la imagen de referencia.</small>
        </div>
      </div>

      <!-- Revestimiento exterior -->
      <div class="field">
        <div class="subbar">revestimiento exterior</div>

        <label for="matExterior">material</label>
        <select id="matExterior">
          <option value="" selected disabled>Seleccionar</option>
          <option>Chapa</option>
          <option>MDF</option>
          <option>MDF + Enchapado</option>
        </select>

        <label for="disExterior" style="margin-top:8px;">dise√±o</label>
        <select id="disExterior">
          <option value="" selected disabled>Seleccionar dise√±o</option>
          <option>SL-1R</option><option>SL-2R</option><option>SL-1RM</option><option>SL-2RM</option>
          <option>SL-3R</option><option>SL-3RB</option><option>SL-3RM</option><option>SL-3RBM</option>
          <option>SL-1LD</option><option>SL-2LA</option><option>SL-1LA</option><option>SL-1LB</option><option>SL-1LC</option>
          <option>SL-3L</option><option>SL-4L</option><option>SL-2LB</option>
          <option>SL-4R</option><option>SL-4RB</option><option>SL-4RM</option><option>SL-4RBM</option>
          <option>SL-7L</option><option>SL-00</option><option>LISA</option>
        </select>

        <label for="termExterior" style="margin-top:10px;">terminaci√≥n exterior</label>
        <input id="termExterior" type="text" placeholder="Ej.: SW-5685n">

        <div class="design-preview">
          <img id="imgExterior" alt="Dise√±o exterior seleccionado">
          <small class="hint">Eleg√≠ material y dise√±o para ver la imagen de referencia.</small>
        </div>
      </div>
    </div>

    <!-- Color de marco (toma todo el ancho) -->
    <div class="field fullrow" style="margin-top:12px;">
      <div class="subbar">color marco (se pinta completo en un solo color)</div>
      <div class="color-row">
        <select id="colorMarco">
          <option value="" selected disabled>Seleccionar</option>
          <option value="Blanco">Blanco</option>
          <option value="Negro">Negro</option>
          <option value="Marr√≥n">Marr√≥n</option>
          <option value="Gris">Gris</option>
          <option value="C√≥digo">C√≥digo</option>
        </select>

        <input id="colorMarcoCodigo" type="text" placeholder="Ingresar c√≥digo (RAL / Sherwin / etc.)" style="display:none;">
      </div>
      <small class="hint">Si seleccion√°s ‚ÄúC√≥digo‚Äù, escrib√≠ el c√≥digo de color en el campo de la derecha.</small>
    </div>
  </div>
</section>
<!-- ===== NOTAS ===== -->
<section class="section" aria-labelledby="titulo-notas">
  <div id="titulo-notas" class="section-title">NOTAS</div>

  <div class="notes-frame">
    <!-- 5 l√≠neas para escribir -->
    <div class="notes-lines">
      <textarea id="notas" aria-label="Notas (5 l√≠neas)"></textarea>
    </div>

    <!-- Firma / Aclaraci√≥n + DNI -->
    <div class="notes-footer">
      <div class="notes-sign-box">
        <div class="sign-line" aria-hidden="true"></div>
        <div class="sign-caption">Firma del cliente</div>
      </div>

      <div class="notes-id-box">
        <label class="underline-label">Aclaraci√≥n del cliente
          <input type="text" class="underline-input" placeholder="">
        </label>
        <label class="underline-label">DNI del cliente
          <input type="text" class="underline-input" placeholder="">
        </label>
      </div>
    </div>
  </div>
</section>

  </div>

  <script>
    /* Mantener s√≥lo d√≠gitos en tel√©fonos/CUIT */
    function keepDigits(el){ const digits = el.value.replace(/\D+/g,''); if (el.value !== digits) el.value = digits; }
    ['telefono','celular','cuit'].forEach(id=>{ const el = document.getElementById(id); el?.addEventListener('input', ()=>keepDigits(el)); });

    /* Dropdowns de las tarjetas */
    (function(){
      function setupDropdown(dd){
        const toggle = dd.querySelector('.dd-toggle');
        const menu   = dd.querySelector('.dd-menu');
        const valueI = dd.querySelector('.dd-value');

        function openMenu(){ menu.classList.add('open'); toggle.setAttribute('aria-expanded','true'); }
        function closeMenu(){ menu.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); }

        toggle.addEventListener('click', (e)=>{ e.stopPropagation(); menu.classList.contains('open') ? closeMenu() : openMenu(); });
        menu.addEventListener('click', (e)=>{ const btn = e.target.closest('.dd-item'); if(!btn) return; valueI.value = btn.dataset.value; toggle.textContent = `${btn.dataset.value} ‚ñæ`; closeMenu(); });
        document.addEventListener('click', ()=>closeMenu());
        document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });
      }
      document.querySelectorAll('.cam-card .dropdown').forEach(setupDropdown);
    })();

    /* Carga de fotos (c√°maras) */
    (function(){
      function setupCamCard(card){
        const openBtn   = card.querySelector('.cam-open');
        const retakeBtn = card.querySelector('.cam-retake');
        const clearBtn  = card.querySelector('.cam-clear');
        const inputFile = card.querySelector('.cam-input');
        const imgPrev   = card.querySelector('.cam-preview');
        const hiddenB64 = card.querySelector('.cam-base64');

        function enableActions(hasPhoto){ retakeBtn.disabled = !hasPhoto; clearBtn.disabled  = !hasPhoto; }
        function toBase64(file){ return new Promise((res, rej)=>{ const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(file); }); }

        openBtn.addEventListener('click', ()=> inputFile.click());
        retakeBtn.addEventListener('click', ()=> inputFile.click());
        clearBtn.addEventListener('click', ()=>{ inputFile.value=''; imgPrev.src=''; imgPrev.style.display='none'; hiddenB64.value=''; enableActions(false); });

        inputFile.addEventListener('change', async (ev)=>{ const file = ev.target.files?.[0]; if(!file) return; const b64 = await toBase64(file); imgPrev.src=b64; imgPrev.style.display='block'; hiddenB64.value=b64; enableActions(true); });
      }
      document.querySelectorAll('.cam-card').forEach(setupCamCard);
    })();

    /* ===== ARMADO: mapas de im√°genes y listeners ===== */
    const seguridadImgMap = {
      "202":  "img/202.png",
      "205":  "img/205.png",
      "5002": "img/5002.png",
      "5005": "img/5005.png"
    };
    /* Claves cortas que COINCIDEN con el value del select */
    const aperturaImgMap = {
      "int-izq": "img/mano_interior_izquierda.png",
      "ext-izq": "img/mano_exterior_izquierda.png",
      "int-der": "img/mano_interior_derecha.png",
      "ext-der": "img/mano_exterior_derecha.png"
    };

    function loadPreview(selectEl, imgEl, map){
      const src = map[selectEl.value];
      if(src){ imgEl.src = src; imgEl.style.display = 'block'; }
      else { imgEl.removeAttribute('src'); imgEl.style.display = 'none'; }
    }

    const selSeg  = document.getElementById('seguridadModelo');
    const imgSeg  = document.getElementById('imgSeguridad');
    const selMano = document.getElementById('manoApertura');
    const imgMano = document.getElementById('imgApertura');

    selSeg?.addEventListener('change', ()=> loadPreview(selSeg,  imgSeg,  seguridadImgMap));
    selMano?.addEventListener('change',()=> loadPreview(selMano, imgMano, aperturaImgMap));
  </script>
  <script>
  // Map de dise√±os -> imagen (por defecto img/<codigo>.png)
  const DESIGN_CODES = [
    "SL-1R","SL-2R","SL-1RM","SL-2RM","SL-3R","SL-3RB","SL-3RM","SL-3RBM",
    "SL-1LD","SL-2LA","SL-1LA","SL-1LB","SL-1LC","SL-3L","SL-4L","SL-2LB",
    "SL-4R","SL-4RB","SL-4RM","SL-4RBM","SL-7L","SL-00","LISA"
  ];
  const DESIGN_IMG_MAP = DESIGN_CODES.reduce((acc,c)=>{ acc[c] = `img/${c}.png`; return acc; }, {});

  function loadDesignImage(selectEl, imgEl){
    const code = selectEl.value;
    const src  = DESIGN_IMG_MAP[code];
    if(src){
      imgEl.src = src;
      imgEl.style.display = 'block';
      imgEl.alt = `Dise√±o ${code}`;
    }else{
      imgEl.removeAttribute('src');
      imgEl.style.display = 'none';
      imgEl.alt = 'Sin dise√±o';
    }
  }

  const disInteriorSel = document.getElementById('disInterior');
  const imgInterior    = document.getElementById('imgInterior');
  const disExteriorSel = document.getElementById('disExterior');
  const imgExterior    = document.getElementById('imgExterior');

  disInteriorSel?.addEventListener('change', ()=> loadDesignImage(disInteriorSel, imgInterior));
  disExteriorSel?.addEventListener('change', ()=> loadDesignImage(disExteriorSel, imgExterior));

  // Color de marco: si eligen "C√≥digo" muestro el input
  const colorSelect = document.getElementById('colorMarco');
  const colorCode   = document.getElementById('colorMarcoCodigo');
  colorSelect?.addEventListener('change', ()=>{
    const isCode = colorSelect.value === 'C√≥digo';
    colorCode.style.display = isCode ? 'block' : 'none';
    if(!isCode){ colorCode.value = ''; }
  });
</script>
<script>
  // Bot√≥n: Guardar como PDF -> abre el di√°logo de impresi√≥n
  (function(){
    const btn = document.getElementById('btnPdf');
    if(!btn) return;

    btn.addEventListener('click', () => {
      // Sugerir nombre con el campo OP si existe
      const originalTitle = document.title;
      const op = document.getElementById('op')?.value?.trim();
      if(op) document.title = `OP-${op}`;
      window.print();
      // Restaurar el t√≠tulo
      setTimeout(() => { document.title = originalTitle; }, 500);
    });
  })();
</script>


</body>
</html>
